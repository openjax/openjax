# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -N -e -U -DskipRTests -DrepoToken=$REPO_TOKEN clean deploy -P deploy;
  else
    mvn -N -e -U -DskipRTests clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: WzmgD+/Cb6toPbUDrccTsMv0WR/se0+njkJer5Aott/DLNgLAUbjLGcGeJTTY7/Biq7YeIUKjj2w4WbfGS2ysYh5lrtCKCEPoKq9piNnyjQrCNE8ZAlnCIoFRBqOqiD8iokEaykwxzTncFeyUnoKYaW77Vye7z4JWfigne8Jaj42qClWQH2tpAnx9W8iL3eeVjkFAbA+tCEJvmw3l01ezRnTDNjr8Z2K3ES84+t3AE4xIh8u2BoQtTeFF3gM82RkoQHk5stPY+cjyfeUlz4aVkkCv/KW+1rAhPHgPbqXgHERecVrWcy2MRAQm3gihvBzzyNRHIMEGNDbV0nHPmSkOm3dFfVihgS3QOEzEPQgTgT4joV7wZJY2GAOW15Mvvt4jrr2HMYSpBzSHdN+zpAZw6xqCnJ8ZS4U6Ov9sv5DNaKZqxPiDzIW6/uH/h7bgt38ZOtS8g6myR560KQDsyFQ5qIFGrVWLy4SiNAQQOT0cpgiqMid5ufz18YErmwuaoIMjN/otjEuoZ6Qn8+I+ws83FbiMe07X6r1fuuyx0VD8eLVKXnuvUB0bHAPguJGhSpKrr5Cx/EAgVmlOSthhb6PJH+prui7jAY5C61hQ4yzn50K/hRt3PBrnRhRh+kXlH46homGwnNNhJ0JmFiMm50wvoG+SpSrm7M3iFq6yIXghmY=
  - secure: Moasir43INY3rvvzjmCbTbGoR/aSa4XryblwKbq/9RRCbmZBrH5e+7lcXGko7on6DQHIpMNGBJlzRIGgvGw/zikulylVDzKxyIkj4HTkI4KSbw0UX1Kard7u2Kf2YIQ0/0bvjCxYeoN94DEsIBDP/omO4Sc7ZZ1ZGQTRzzvWe3rwBiWGUMzSbI/2DyKkdCm6JqZXync/D45e85o+OJdhHYcaVI/KyC9O6pmC5kQvfUVvhRdxPKb4GL4qN2QWFIwvxH5iVwZY1nX1tRn2qhZa7s9cCUaOBzZVD7jtKtPxX0qIpVlYAXAS2GRSGawoTKqpre4stCCGVP4DBiGAPeuIIgxh53Ty/RVVoPDRAQZksLk0J17gcfKXJsgaGGpCCiZEewXrxiybeofo3t1vpenvzESTVbUj7N9BeZg73E/U41CVWU7FpcwPcxs1WeGDQRD2kQ1VF9X5J9Wg6XirrZvVkFHsMinVQTdQ4DyrR0PQHWKxsl8cprH2qR/xME2vAqDmFumbTrlLsNIile6Ab+Hu0ySKHPzD1eeWiQHjA2Bs07NuKqHcA+ahcFD30gzok24j0tdHgY2SbzPKOBLdYel6h6z0KWudwdu7OFyVySwHXh6uuEvzsGpNG73K64tHueAjePDaBqV1mU2Asqs+UECfhUlTeoItZl/dbg9LjOegq+4=
  - secure: FcjWSL1i2VKqBLl/nHl3s3IAzw+cgeZW4h57R25KUZ8xi5NSdeZRZYqsfz0GFQ9u+dYXLJkhkvP02/0Bm+Q9cDl7kP6MkOiS76BsZVqOTwf9YF1ja5L/Ll+YGQSMwfEKTosF5xaAY0tffDALFCLG34WLGFxiWilKS9LyPL/2RjG0L5b1710tApjNqm6k1lQiHMmcdP/N9QR65APQlMF0oBL1gZVwEggxN4OukzlzPuFFWaGodmws4kYho8IOaneU/QslAqzwGdaDB7DvvasltBDZDfWRuL2xvOv/AFt94brZlrGE531ABMuG0lELxWqBPucUIYhY9Hqx7yNCqdEUllAJEB2guX6CFH3nwuw7hu9VzCYMbT8px9m00/XzCfJm/rwfjwidx2VvFvgs736YlJsQ+hiPQOz66cFIKwxkoWii5I4Gh3l2xukGDgxe8/hStWHDwWR3dCJCaKNsOe12NDoqc1ijeQ1csxVdJX3eQNuOvGxVGHp33E+vScQHk4TZGhwDY1Dy5XI0pCGDH/pa3jE4QPFbEVL1zXHI1P7Hm7ZYxa/MrrpIr+8CWWy5scjyeX1XGjjfml10NPdzRXH7uC1PinHx55JUEc6xpdGFLxcWKmLMa5fv9an0NvPxT7jgpvEx3uz1bBcpsPpoT7yaaQWP7WJhvqPLC7RV3k1vlMo=
  - secure: dm5NA7sWkTmG2IFvMZC1qHf4W+p6xr5VKtreEx1uqx2Dy8InTkqkkXEwX+s3V6OLsz2Qr13K9lndYkwuroIVayrJ2uJ5yXpGHFQoAZ87GsE9VNBmVKY7OnZhhoqO8KnBEt3m8Szr8CvewoSUJnlKoNo+8lA0SunjJNOBiB+/UrAv7GvyU3utSCS+ZugD/O+OoEKqP9GfJoMlIAdNrdxssTI6YdozwGt/b8b+c2z3M9u7sVbzxNitVcODYI3zIh8M2f0XChkp3J86UDoQZOSyeDF+7l2dwZ77prgUBSewgWYaiWOJIFUX0CsaSxGCtVNwmHQIkGQeA403otchWHSooYP89mR9Z3uCKG77Cx0N6uyCoZGJwt8PRrPRRW7KtILHBXm0PaOZ7Qg7nqe7yMBBJzOOi9wsF4vruNnvQUaMU5Of4Covr0kwxf/xozArNK05hRL0QrISQ9GHILpuYwLZzDlXxPAsbjS4cn58Im3hU4lH2VxUXOH+3tD9ZZWN6fcaPBmPl043zqy3YdbME9z89uOfupEGvRIZL3yWOuBIswrJYzojgF4enU2gIFjGfbV4M9v913aHJzRXNGsmnASnP8DmX9Qcldz/2ux54StTF6wKYqYp4aHdTQmfZ5VYYMq6Gzi0J9BhsdIJDEGWwllRMBJq81KSCy2yAlxI1qfBgHg=
  - secure: Ds8jjEMuyVRJFHb5t1MgrRy74gJypiRcfYh1BdSH/wf8Jg4PsX68/YlXHUZgJQm19HSD0z8VrF+V3ffeynUNxlcPKH/kpT7ai3wO2oqe4YdbFaYrksjubYjfzxTmEu69RZVoFHKELmEnU4iRQ83ZSnyEzszXdJU+y7eBo1vXR5K9LsYeOyx37bTXoSrWTUAVjZ1+I4EK3AWWn8DhtWwHsOlsVsouy8x9oluxND65Qfw2T1FAyM5uXWC+U0GEfU2Wa8orFmF5h4YQ14VBgfy36pc5ycWKdjEYSdPuE35ggF/PEmI4F4iNKa1YSS1hDdOzLjlswC05+5+MsQfJ1s+g6r65jK3X8a+qEzc1pWbeBejFoBWglg+EBfzj73UtyTBA7rrXO9d9QRIEsPgaYG9XP1kIvga34T+DpmPY1IPBY44FPsYx/qJV/rq58OzsvvXoa+Ad18a748CPRwNoZIriwwYUgpwO3F36b677Efb9VPBCy++KDbdjBEk8pGxL/pzjizZYBAQGlaHmz9kdCLWEpa73uR5GkwvOUxRmFsVjcqFP+5yMuOW1QBE477ZaQ28U7lFKYOlaYJS1WFLZa87s6s0qu0TKk9V6JLuq4ZgOkLzLBqwi4jsnV9Wnly9TKqFwsBSmGcz7wuq9mdtKtV53bZn2P5yjZbjLbLWoRkc5kcI=
  - secure: rQhPz8r5vtAck12YpkohyHJ3jtiR9zWbBcJI/Ud38bqNd9HMUoPToVhrKUf3QYEoH01AELFiiESzgkstxSBwBtbLPJZLId7x8iAUmR7Vtc92OrebEuU/Dg5Jh99DYKTJGU5DF0kBG32IOWEa8mWjwBaVPtvUQdpwmPQTshcoEfzVyJFcRfJ+G/p5r4n2rn0hQ95F5g0yiCobEcsi9xaV6AFakYavJx0dmtgMZ7PKUdNUl4fWMFLlXr+g0FbBb5yMikzgNHPPczrOloTl8YgltTmzCX4snVIyBt2FYhcrr8GLIXEkXRwX+ZYkoMz+ZABfRkZiB10uANQC1PHdn1W+jbl5Q/uZo8Hy67cQXkO5GN3NuyhsOX0R2bkj4OYLGrxLEySF6/CDgL7N5PvzkW8QYLMUfvQLPvW0CjuwN5woUKTqDreZyWoytRH7v8Rp4UWRLF9penU7J4L8InDWPOUdxcYSLiFobTlzXlkTs9OrOg5ScdnQQBAoDqMX9oHJe39CFjTWH5rfRQHbGNIcELwvEABn6/Z7MeecNIyFz3Jg2oP2IKfjyJWdPHmGXFhNNeB4eoNNNIEpZBnqbpw8/IfSSjTKVNUA30p7xFGb2rH4FcCZ7obDIqPDm48s78C+urBelDm7vx0vGu382JzxlfSDCvbHUwuj3uRaJn+3sbbSmz8=
  - secure: IZt3ObC2mbqYpyjpJDG0U+FBIYQlCwxIXbEaDh8YASiYUtxjVeFOBiZp6MOzNrbw2RMr80KOhok4+TChvlKdLO1c9fdaogbJXw9+hVZxZCnQ9Rs+cGGYDpEWdb22/O/+pV93mbAbDlGyUvlcflAbvZpS5sYtWE5YNBy5xRg3Xo53P956fe4Uv+M8DYVXeq6e9bGLft+8N8lSc33OYenKuBDiiuCXUP5VuMPB+1yloAu4xBqJ0LgcVKM/nDCCi9QEslCqjAp1MBZVqkBLDfKX0k3XK4qIAspcaOBqFoODUaRDGxL1pKD8KrQLeBdqmIG2SqV7iEvWiSfWklbuFpf9bFagdAxrFFu7mks7qecKbA7VRJnjOL+BqNzgEKp8p9z8Xh8IbrPUncmZ3+uqSWKGOpcaDkSvN7yNyTrvYY8d/ETovvwvYDbMZ6NLlWap2bfyI+81mbaC75bEE+N34gjEPAEIUExKOMZ3hujzsLKSlkWh+WB0iy1EntZuztK7fHZmMbZT4pwFU8sapyKKoxNAhiEcgt9VJiVIy45NlIZ7rlQcOTe+iLXLYPT/GaoS9edKjtXsUO+5dpjBA4WH0Y8DrYpyj2XG0kg9YVGvhgec0wu1DaXF0IfzeD+FBJBF99AF+InS6RFdvUCZJtKvOq7PxsD6vxuSum1vEhZXVCk9Ed0=
